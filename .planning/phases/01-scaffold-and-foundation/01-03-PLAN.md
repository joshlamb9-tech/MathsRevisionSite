---
phase: 01-scaffold-and-foundation
plan: 03
type: execute
wave: 3
depends_on:
  - 01-01
  - 01-02
files_modified:
  - foundation/fractions/index.html
  - foundation/division/index.html
  - foundation/prime-factors/index.html
  - foundation/estimation/index.html
  - foundation/long-multiplication/index.html
  - foundation/averages/index.html
  - core/ratio/index.html
  - core/percentages/index.html
  - core/algebra-basics/index.html
  - core/shape/index.html
  - core/averages/index.html
  - core/angles/index.html
  - core/probability/index.html
  - core/coordinates-graphs/index.html
  - core/transformations/index.html
  - core/volume-surface-area/index.html
  - core/sequences-nth-term/index.html
  - core/straight-line-graphs/index.html
  - core/speed-distance-time/index.html
  - core/powers-roots/index.html
  - core/charts-data/index.html
  - additional/index-laws/index.html
  - additional/expanding-factorising/index.html
  - additional/pythagoras/index.html
autonomous: true
requirements:
  - INFRA-04
  - DESIGN-02
  - DESIGN-03
  - DESIGN-04

must_haves:
  truths:
    - "All 24 topic URL slugs exist as directories with index.html files — folder structure is locked for the RAG tracker"
    - "Every topic stub page loads without a 404 on the live GitHub Pages URL"
    - "Every topic stub has a breadcrumb linking back to its level index"
    - "Every topic stub has inline nav allowing navigation to Foundation, Core, and Additional"
    - "The topic stub template includes the full KaTeX head block ready for content authoring"
  artifacts:
    - path: "foundation/fractions/index.html"
      provides: "Foundation Fractions stub"
      contains: "breadcrumb"
    - path: "core/coordinates-graphs/index.html"
      provides: "Core Coordinates and Graphs stub (slug must be exactly coordinates-graphs)"
      contains: "breadcrumb"
    - path: "additional/pythagoras/index.html"
      provides: "Additional Pythagoras stub (slug must be exactly pythagoras)"
      contains: "breadcrumb"
  key_links:
    - from: "foundation/fractions/index.html"
      to: "/foundation/"
      via: "breadcrumb anchor"
      pattern: "href=\"/foundation/\""
    - from: "core/coordinates-graphs/index.html"
      to: "/core/"
      via: "breadcrumb anchor"
      pattern: "href=\"/core/\""
    - from: "additional/pythagoras/index.html"
      to: "/additional/"
      via: "breadcrumb anchor"
      pattern: "href=\"/additional/\""
---

<objective>
Create all 24 topic stub pages — one index.html per topic folder — locking the URL structure before any content authoring begins.

Purpose: The RAG tracker (Phase 5) writes localStorage keys using topic slugs. Changing these slugs after Phase 5 loses pupil progress data. The slugs must be locked in this phase and never changed. Stub pages also give content authors (Phases 2–4) the correct HTML template with KaTeX head block, inline nav, and breadcrumb already in place — copy-and-fill, not build-from-scratch.

Output: 24 topic stub pages in their correct folder structure. Each stub shows a placeholder message ("Content coming soon") and the full page chrome (nav, breadcrumb, page title, KaTeX head block). No actual maths content yet — that is Phase 2/3/4.
</objective>

<execution_context>
@/Users/josh/.claude/get-shit-done/workflows/execute-plan.md
@/Users/josh/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/phases/01-scaffold-and-foundation/01-RESEARCH.md
@.planning/phases/01-scaffold-and-foundation/01-01-SUMMARY.md
@.planning/phases/01-scaffold-and-foundation/01-02-SUMMARY.md

LOCKED SLUGS (from 01-RESEARCH.md — these are permanent, RAG tracker depends on them):

Foundation (6):
- fractions
- division
- prime-factors
- long-multiplication
- estimation
- averages

Core (15):
- ratio
- percentages
- algebra-basics
- shape
- averages
- angles
- probability
- coordinates-graphs
- transformations
- volume-surface-area
- sequences-nth-term
- straight-line-graphs
- speed-distance-time
- powers-roots
- charts-data

Additional (3):
- index-laws
- expanding-factorising
- pythagoras

TOTAL: 24 slugs. All must be created this phase.

The KaTeX head block to use in every stub (from 01-02-SUMMARY.md):
- katex-swap.min.css (no SRI on CSS)
- katex.min.js with defer + integrity hash
- auto-render.min.js with defer + integrity hash + onload callback
- Delimiter order: $$ before $

Nav pattern: inline in every file (NOT fetch fragment — Safari/CORS bug confirmed in 01-RESEARCH.md).
Asset paths: root-relative (/assets/css/styles.css) — NOT relative (../assets/...).
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create all 24 topic stub pages</name>
  <files>
    foundation/fractions/index.html
    foundation/division/index.html
    foundation/prime-factors/index.html
    foundation/estimation/index.html
    foundation/long-multiplication/index.html
    foundation/averages/index.html
    core/ratio/index.html
    core/percentages/index.html
    core/algebra-basics/index.html
    core/shape/index.html
    core/averages/index.html
    core/angles/index.html
    core/probability/index.html
    core/coordinates-graphs/index.html
    core/transformations/index.html
    core/volume-surface-area/index.html
    core/sequences-nth-term/index.html
    core/straight-line-graphs/index.html
    core/speed-distance-time/index.html
    core/powers-roots/index.html
    core/charts-data/index.html
    additional/index-laws/index.html
    additional/expanding-factorising/index.html
    additional/pythagoras/index.html
  </files>
  <action>
Create all 24 topic stub pages in /Users/josh/projects/maths-revision/. Each file follows the same template with three variables: LEVEL (foundation/core/additional), SLUG (the kebab-case folder name), and TOPIC_NAME (human-readable name).

**Stub page template:**

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>[TOPIC_NAME] | [LEVEL_NAME] | Mowden Hall Maths Revision</title>

  <!-- Dosis font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Dosis:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

  <!-- KaTeX 0.16.33 — ready for content authoring -->
  <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/katex@0.16.33/dist/katex-swap.min.css"
        crossorigin="anonymous">
  <script defer
          src="https://cdn.jsdelivr.net/npm/katex@0.16.33/dist/katex.min.js"
          integrity="sha384-YPHNAPyrxGS8BNnA7Q4ommqra8WQPEjooVSLzFgwgs8OXJBvadbyvx4QpfiFurGr"
          crossorigin="anonymous"></script>
  <script defer
          src="https://cdn.jsdelivr.net/npm/katex@0.16.33/dist/contrib/auto-render.min.js"
          integrity="sha384-JKXHIJf8PKPyDFptuKZoUyMRQJAmQKj4B4xyOca62ebJhciMYGiDdq/9twUUWyZH"
          crossorigin="anonymous"
          onload="renderMathInElement(document.body, {
            delimiters: [
              {left: '$$', right: '$$', display: true},
              {left: '$', right: '$', display: false},
              {left: '\\(', right: '\\)', display: false},
              {left: '\\[', right: '\\]', display: true}
            ]
          });"></script>

  <link rel="stylesheet" href="/assets/css/styles.css">
</head>
<body>

  <header class="site-header">
    <div class="header-inner">
      <a href="/" style="display:flex;align-items:center;gap:0.75rem;text-decoration:none">
        <div class="brand-name">Maths Revision</div>
      </a>
      <nav class="header-nav">
        <a href="/" class="hn-link">Home</a>
        <a href="/foundation/" class="hn-link[ACTIVE_FOUNDATION]">Foundation</a>
        <a href="/core/" class="hn-link[ACTIVE_CORE]">Core</a>
        <a href="/additional/" class="hn-link[ACTIVE_ADDITIONAL]">Additional</a>
      </nav>
    </div>
  </header>

  <main class="main-content">
    <p class="breadcrumb">
      <a href="/">Home</a> ›
      <a href="/[LEVEL]/">[LEVEL_NAME]</a> ›
      [TOPIC_NAME]
    </p>

    <span class="level-badge [LEVEL]">[LEVEL_NAME]</span>
    <h1 class="page-title">[TOPIC_NAME]</h1>

    <p style="color:var(--text-muted);margin-top:1rem">
      Content for this topic will be added in a later phase.
    </p>
  </main>

  <footer>
    <p>Mowden Hall School · Year 8 CE Maths Revision</p>
  </footer>

</body>
</html>
```

**For each file, replace the placeholders:**
- `[ACTIVE_FOUNDATION]` → ` active` (with leading space) for Foundation topics, empty string for Core/Additional
- `[ACTIVE_CORE]` → ` active` for Core topics, empty string for Foundation/Additional
- `[ACTIVE_ADDITIONAL]` → ` active` for Additional topics, empty string for Foundation/Core
- `[LEVEL]` → the level folder name (foundation / core / additional)
- `[LEVEL_NAME]` → Foundation / Core / Additional
- `[TOPIC_NAME]` → the human-readable topic name

**Complete mapping (24 files):**

Foundation (level badge class: `foundation`, LEVEL_NAME: `Foundation`):
| File | TOPIC_NAME |
|------|-----------|
| foundation/fractions/index.html | Fractions |
| foundation/division/index.html | Division |
| foundation/prime-factors/index.html | Prime Factors |
| foundation/estimation/index.html | Estimation |
| foundation/long-multiplication/index.html | Long Multiplication |
| foundation/averages/index.html | Averages |

Core (level badge class: `core`, LEVEL_NAME: `Core`):
| File | TOPIC_NAME |
|------|-----------|
| core/ratio/index.html | Ratio |
| core/percentages/index.html | Percentages |
| core/algebra-basics/index.html | Algebra Basics |
| core/shape/index.html | Shape |
| core/averages/index.html | Averages |
| core/angles/index.html | Angles |
| core/probability/index.html | Probability |
| core/coordinates-graphs/index.html | Coordinates and Graphs |
| core/transformations/index.html | Transformations |
| core/volume-surface-area/index.html | Volume and Surface Area |
| core/sequences-nth-term/index.html | Sequences and nth Term |
| core/straight-line-graphs/index.html | Straight Line Graphs |
| core/speed-distance-time/index.html | Speed, Distance and Time |
| core/powers-roots/index.html | Powers and Roots |
| core/charts-data/index.html | Charts and Data Interpretation |

Additional (level badge class: `additional`, LEVEL_NAME: `Additional`):
| File | TOPIC_NAME |
|------|-----------|
| additional/index-laws/index.html | Index Laws |
| additional/expanding-factorising/index.html | Expanding and Factorising |
| additional/pythagoras/index.html | Pythagoras |

After creating all 24 files, commit and push:
```bash
cd /Users/josh/projects/maths-revision
git add .
git commit -m "feat(01-03): create 24 topic stubs — URL structure locked"
git push origin main
```
  </action>
  <verify>
    <automated>
      cd /Users/josh/projects/maths-revision &&
      echo "=== Counting topic stubs ===" &&
      find foundation core additional -name "index.html" -not -path "*/index.html" -prune -o -name "index.html" -print | grep -v "^foundation/index.html$" | grep -v "^core/index.html$" | grep -v "^additional/index.html$" | wc -l &&
      echo "(expected: 24)" &&
      echo "=== Checking key slugs ===" &&
      test -f foundation/fractions/index.html && echo "PASS: fractions" || echo "FAIL: fractions" &&
      test -f foundation/prime-factors/index.html && echo "PASS: prime-factors" || echo "FAIL: prime-factors" &&
      test -f foundation/long-multiplication/index.html && echo "PASS: long-multiplication" || echo "FAIL: long-multiplication" &&
      test -f core/coordinates-graphs/index.html && echo "PASS: coordinates-graphs" || echo "FAIL: coordinates-graphs" &&
      test -f core/sequences-nth-term/index.html && echo "PASS: sequences-nth-term" || echo "FAIL: sequences-nth-term" &&
      test -f core/speed-distance-time/index.html && echo "PASS: speed-distance-time" || echo "FAIL: speed-distance-time" &&
      test -f core/volume-surface-area/index.html && echo "PASS: volume-surface-area" || echo "FAIL: volume-surface-area" &&
      test -f core/straight-line-graphs/index.html && echo "PASS: straight-line-graphs" || echo "FAIL: straight-line-graphs" &&
      test -f additional/index-laws/index.html && echo "PASS: index-laws" || echo "FAIL: index-laws" &&
      test -f additional/expanding-factorising/index.html && echo "PASS: expanding-factorising" || echo "FAIL: expanding-factorising" &&
      test -f additional/pythagoras/index.html && echo "PASS: pythagoras" || echo "FAIL: pythagoras" &&
      echo "=== Checking KaTeX in a sample stub ===" &&
      grep -q "defer" core/coordinates-graphs/index.html && echo "PASS: defer present" || echo "FAIL: defer missing" &&
      grep -q "katex-swap" core/coordinates-graphs/index.html && echo "PASS: swap CSS used" || echo "FAIL: wrong CSS" &&
      echo "=== Checking breadcrumb in a sample stub ===" &&
      grep -q "breadcrumb" additional/pythagoras/index.html && echo "PASS: breadcrumb present" || echo "FAIL: breadcrumb missing" &&
      grep -q 'href="/additional/"' additional/pythagoras/index.html && echo "PASS: back-link to /additional/" || echo "FAIL: back-link missing" &&
      echo "=== Checking root-relative paths ===" &&
      grep -q 'href="/assets/css/styles.css"' core/ratio/index.html && echo "PASS: root-relative CSS path" || echo "FAIL: relative path bug"
    </automated>
  </verify>
  <done>
    All 24 topic stub directories exist with index.html files.
    Every stub has: KaTeX head block with defer and correct delimiter order, inline nav with correct active level, breadcrumb with root-relative back-link to level index, level badge, page title, root-relative CSS path.
    Slugs are exactly as specified — kebab-case, matching the locked list.
    Files committed and pushed to GitHub.
  </done>
</task>

<task type="auto">
  <name>Task 2: Verify URL structure on live GitHub Pages</name>
  <files></files>
  <action>
Verify the 24 stub pages are accessible on the live GitHub Pages URL. This is a check task — no files are modified.

Run curl checks against the live URL to confirm:
1. No 404s on topic pages
2. Root-relative CSS paths resolve correctly from depth-2 pages

Retrieve the live URL from 01-02-SUMMARY.md (recorded during the KaTeX checkpoint). The pattern is `https://[username].github.io/[repo-name]/`.

Run these checks (replace BASE_URL with the actual URL):

```bash
BASE_URL="https://[username].github.io/[repo-name]"

# Check a selection of topic pages — expect HTTP 200
curl -s -o /dev/null -w "%{http_code}" "$BASE_URL/foundation/fractions/" && echo " /foundation/fractions/"
curl -s -o /dev/null -w "%{http_code}" "$BASE_URL/core/coordinates-graphs/" && echo " /core/coordinates-graphs/"
curl -s -o /dev/null -w "%{http_code}" "$BASE_URL/additional/pythagoras/" && echo " /additional/pythagoras/"
curl -s -o /dev/null -w "%{http_code}" "$BASE_URL/assets/css/styles.css" && echo " /assets/css/styles.css"
```

All should return 200. If any return 404, check:
- The git push completed successfully
- GitHub Pages has finished deploying (check repo Settings > Pages for status)
- The folder name matches exactly (case-sensitive, kebab-case)

If GitHub Pages is still deploying (can take up to 3 minutes), wait and retry.

Note: If the site is deployed at a subdirectory path (e.g. `github.io/repo-name/`) then root-relative paths like `/assets/css/styles.css` will resolve to `github.io/assets/css/styles.css` which is wrong — they need to be `github.io/repo-name/assets/css/styles.css`. This is a known GitHub Pages pitfall for project sites (as opposed to user sites at `username.github.io`).

**IF root-relative paths break on project site subdirectory:**
Two options:
1. Add `<base href="https://[username].github.io/[repo-name]/">` in the `<head>` of every HTML file
2. Configure a custom domain (resolves to root)
3. Use relative paths carefully (complex due to depth variation)

Option 1 (base tag) is the cleanest fix if needed. Check the live URL first — if all pages load with correct CSS and nav, root-relative paths are working and no action is needed.

Document the result in 01-03-SUMMARY.md. If a base tag fix was needed, record which files were updated.
  </action>
  <verify>
    <automated>
      echo "Live URL verification — run manually with actual BASE_URL from 01-02-SUMMARY.md" &&
      echo "Expected: HTTP 200 for all 24 topic pages and /assets/css/styles.css"
    </automated>
    <manual>
      Visit 3 sample URLs on the live site and confirm:
      1. Page loads with correct Dosis font and navy header (CSS resolved)
      2. Nav links work (Foundation/Core/Additional)
      3. Breadcrumb shows "Home > [Level] > [Topic]" and back-link works
    </manual>
  </verify>
  <done>
    All 24 topic stubs return HTTP 200 on the live GitHub Pages URL.
    CSS loads correctly from depth-2 pages (/level/topic/).
    If base tag fix was needed, all 24+ HTML files updated and noted in summary.
    Live URL recorded in 01-03-SUMMARY.md.
  </done>
</task>

</tasks>

<verification>
- All 24 topic directories exist: 6 Foundation + 15 Core + 3 Additional
- Slug names match exactly: prime-factors (not prime_factors), coordinates-graphs (not coordinates-and-graphs), sequences-nth-term, volume-surface-area, straight-line-graphs, speed-distance-time, charts-data, index-laws, expanding-factorising
- Every stub has inline nav (not fetch fragment)
- Every stub uses root-relative /assets/css/styles.css
- Every stub has KaTeX head block with defer, correct SRI hashes, $$ before $ delimiter order
- Every stub has breadcrumb with working back-link to its level index
- Level index pages (from 01-01) now have working links to all stubs
- All stubs return HTTP 200 on live GitHub Pages URL
</verification>

<success_criteria>
- All 24 topic slugs are locked and will not change through Phases 2–5
- The RAG tracker (Phase 5) can safely use these slugs as localStorage keys
- Content authors (Phases 2–4) can copy any stub and fill in the content section — no KaTeX setup work needed
- Every stub accessible at /level/slug/ on the live GitHub Pages URL
- Navigation works from any topic page back to the level index and home
</success_criteria>

<output>
After completion, create `.planning/phases/01-scaffold-and-foundation/01-03-SUMMARY.md` with:
- Confirmation all 24 slugs created (list them)
- Live GitHub Pages base URL
- Whether base tag fix was needed (and which files were updated if so)
- The topic stub template (final HTML) for content authors in Phases 2–4 to copy
- Confirmation the URL structure is locked — note in STATE.md that slugs must not be changed
</output>
